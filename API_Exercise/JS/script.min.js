function showSpinner(){const e=document.getElementById("loadingSpinner");e.style.display="block"}function hideSpinner(){const e=document.getElementById("loadingSpinner");e.style.display="none"}function updateTable(e){table.innerHTML="",e.sort((e,n)=>e.artistName.localeCompare(n.artistName)),e.forEach(e=>{const n=document.createElement("div");n.innerHTML=`\n        <div class="img-container">\n          <img class="cover-img" src="${e.artworkUrl100}" alt="Cover Image">  \n          <img class="play-button" src="/CSS/imgs/spotifyplay.png">\n          <audio class="audioRow" preload="none" src="${e.previewUrl}"></audio>\n        </div>\n        <p class="track">${e.trackName}</p>\n        <p class="artist">${e.artistName}</p>\n      `,n.classList.add("songCard"),table.appendChild(n)})}async function searchSongs(e){showSpinner();try{let n=await fetch(`https://itunes.apple.com/search?term=${e}&entity=song`);if(!n.ok)throw new Error("Network response was not ok.");let t=await n.json();setTimeout(()=>{updateTable(t.results),hideSpinner()},2e3)}catch(n){console.error("Error fetching data:",n),setTimeout(()=>{hideSpinner(),main.innerHTML=`<h2 class="error">No results found for '${e}'</h2><p class="error">Please make sure your words are spelled correctly, or use fewer or different keywords.</p>`},500)}}const searchBox=document.getElementById("searchBox"),table=document.getElementById("songTable"),main=document.querySelector("main");searchBox.addEventListener("input",async()=>{const e=searchBox.value.trim();e.length>0?searchSongs(e):main.innerHTML=""}),table.addEventListener("click",e=>{const n=e.target;if(n.classList.contains("play-button")){const e=n.closest(".img-container").querySelector(".audioRow");e.paused?(n.src="/CSS/imgs/pausebtn.png",e.play()):(n.src="/CSS/imgs/spotifyplay.png",e.pause())}});